--임시사용자
DROP TABLE AC CASCADE CONSTRAINTS;

CREATE TABLE AC(
    USER_NO NUMBER NOT NULL,
    USER_ID VARCHAR2(15) NOT NULL,
    BIRTH DATE NOT NULL,
    USER_PWD VARCHAR2(50) NOT NULL,
    GENDER VARCHAR2(2) NOT NULL,
    USER_NAME VARCHAR2(20) NOT NULL,
    EMAIL VARCHAR2(100)  NOT NULL,
    PHONE VARCHAR2(12)  NOT NULL,
    CODE_POSTAL VARCHAR2(20)  NOT NULL,
    ADDRESS VARCHAR2(160)  NOT NULL,
    ADDRESS2 VARCHAR2(160)  NOT NULL,
    JOIN_DATE DATE DEFAULT SYSDATE NOT NULL,
    SMS_YN VARCHAR2(2),
    EMAIL_YN VARCHAR2(2),
    POINT NUMBER NOT NULL,
    
    CONSTRAINT PK_USERNO PRIMARY KEY(USER_NO)--기본키
);

DROP SEQUENCE SEQ_USER_NO;

CREATE SEQUENCE SEQ_USER_NO 
START WITH 1
INCREMENT BY 1
NOCYCLE     
NOCACHE;   

-- 사용자 SAMPLE INSERT
INSERT INTO AC VALUES(SEQ_USER_NO.NEXTVAL,'user01','1990-01-01','pass01','F','홍길동','hogildong@naver.com','01099996777','475-765','강남구','kh정보교육원',DEFAULT,'N','N',0);

DROP TABLE COMPANION CASCADE CONSTRAINTS;

CREATE TABLE COMPANION(
	COMPANION_NO NUMBER NOT NULL,
	COMPANION_TITLE VARCHAR2(50) NOT NULL,
	USER_NO NUMBER NOT NULL,
	COMPANION_CONTENT VARCHAR2(50) NOT NULL,
	COMPANION_DATE DATE DEFAULT SYSDATE NOT NULL,
	COMPANION_SCHEDULE VARCHAR2(50),
	COMPANION_PROGRESS NUMBER NOT NULL,

	CONSTRAINT PK_COMPANIONNO PRIMARY KEY(COMPANION_NO), -- 기본키
	CONSTRAINT FK_CUSERNO FOREIGN KEY (USER_NO) REFERENCES AC(USER_NO) --외래키

);

COMMENT ON COLUMN COMPANION.COMPANION_NO IS '게시판번호';
COMMENT ON COLUMN COMPANION.COMPANION_TITLE IS '제목';
COMMENT ON COLUMN COMPANION.USER_NO IS '작성자';
COMMENT ON COLUMN COMPANION.COMPANION_CONTENT IS '내용';
COMMENT ON COLUMN COMPANION.COMPANION_DATE IS '작성일';
COMMENT ON COLUMN COMPANION.COMPANION_SCHEDULE IS '일정공유';
COMMENT ON COLUMN COMPANION.COMPANION_PROGRESS IS '진행현황';

--동행찾기게시판번호 시퀀스
DROP SEQUENCE SEQ_CP_NO;

CREATE SEQUENCE SEQ_CP_NO
START WITH 1
INCREMENT BY 1
NOCYCLE
NOCACHE;

--동행 찾기 샘플 INSERT
INSERT INTO COMPANION VALUES(SEQ_CP_NO.NEXTVAL, '제주도 가자', 1, '즐거운여행해요', '2019-05-08', NULL, 1); 



--동행찾기게시판댓글
DROP TABLE COMPANION_REPLY CASCADE CONSTRAINTS;

CREATE TABLE COMPANION_REPLY(
COMPANION_REPLY_NO NUMBER NOT NULL,
COMPANION_NO NUMBER NOT NULL,
USER_NO NUMBER NOT NULL,
COMPANION_REPLY_CONTENT VARCHAR2(100) NOT NULL,

CONSTRAINT PK_COMPREPLYNO PRIMARY KEY(COMPANION_REPLY_NO), -- 기본키
CONSTRAINT FK_CPRCOMPNO FOREIGN KEY (COMPANION_NO) REFERENCES COMPANION(COMPANION_NO),
CONSTRAINT FK_CPRACUSERNO FOREIGN KEY (USER_NO) REFERENCES AC(USER_NO) --외래키
);

COMMENT ON COLUMN COMPANION_REPLY.COMPANION_REPLY_NO IS '댓글번호';
COMMENT ON COLUMN COMPANION_REPLY.COMPANION_NO IS '게시판번호';
COMMENT ON COLUMN COMPANION_REPLY.USER_NO IS '작성자';
COMMENT ON COLUMN COMPANION_REPLY.COMPANION_REPLY_CONTENT IS '댓글내용';

DROP SEQUENCE SEQ_CPREPLY_NO;
-- 동행찾기댓글번호 시퀀스
CREATE SEQUENCE SEQ_CPREPLY_NO
START WITH 1
INCREMENT BY 1
NOCYCLE
NOCACHE;

-- 동행찾기 댓글 샘플 INSERT
INSERT INTO COMPANION_REPLY VALUES(SEQ_CPREPLY_NO.NEXTVAL, 1, 1, '즐거운여행해요');
